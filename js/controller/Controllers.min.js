SDM.angular.controller("ListeDateController",["$scope","$http","$filter","InitService","DataService","sharedProperties","$timeout",function(a,b,c,d,e,f,g){"use strict";d.addEventListener("ready",function(){a.onItemClicked=function(a){e.movieClicked(a)},SDM.fw7.app.onPageBeforeAnimation("Liste-date",function(b){a.concerts=f.getConcerts,a.Localisation=f.getLocalisation;var c=localStorage.getItem("date");a.date=h(c),a.DateNow=Math.round((new Date).getTime()/1e3);var d=localStorage.getItem("departement"),e=localStorage.getItem("region"),c=localStorage.getItem("date");""!=d&&null!=d?(f.setLocalisation(d),a.departement=" dans le département "+d):""!=e&&null!=e&&(f.setLocalisation(e),a.departement=""),a.date=c,a.$apply(),0===Object.keys(a.filteritem).length?a.DateNull=1:a.DateNull=0,a.$apply()});var b=localStorage.getItem("date");a.date=h(b)}),a.IsFav=function(a){return e.IsFav(a)},a.AddFav=function(a){e.AddFav(a)},a.DeleteFav=function(a){e.DeleteFav(a)};var h=function(a){var b=a;return a<10&&(b="0"+b),b};a.IsNew=function(a){var b=localStorage.getItem(a);if("new"===b||"10"===b)return 1}}]),SDM.angular.controller("UneController",["$scope","$http","$filter","InitService","DataService","sharedProperties","$timeout",function(a,b,c,d,e,f,g){"use strict";d.addEventListener("ready",function(){a.onItemClicked=function(a){e.movieClicked(a)}}),a.concerts=f.getConcerts,a.DateNow=Math.round((new Date).getTime()/1e3),a.IsFav=function(a){return e.IsFav(a)},a.AddFav=function(a){e.AddFav(a)},a.DeleteFav=function(a){e.DeleteFav(a)};a.IsNew=function(a){var b=localStorage.getItem(a);if("new"===b||"10"===b)return 1}}]),SDM.angular.controller("ListeGroupeController",["$scope","$http","$filter","InitService","DataService","sharedProperties","$timeout",function(a,b,c,d,e,f,g){"use strict";SDM.fw7.app.onPageBeforeAnimation("ListeGroupes",function(b){a.onItemClicked=function(a){e.movieClicked(a)}}),a.concerts=f.getConcerts,a.name=f.getname,a.IsFav=function(a){return e.IsFav(a)},a.AddFav=function(a){e.AddFav(a)},a.DeleteFav=function(a){e.DeleteFav(a)}}]),SDM.angular.controller("PartenairesController",["$scope","$window","$http","InitService","DataService",function(a,b,c,d,e){a.METALLIAN=function(){function a(a){1==a&&navigator.app.loadUrl("www.metallian.net",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site METALLIAN.",a,"Redirection",["OK","Annuler"])},a.METALLIANPRODS=function(){function a(a){1==a&&navigator.app.loadUrl("www.metallianprod.com",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site METALLIAN PRODS.",a,"Redirection",["OK","Annuler"])},a.GARMONBOZIA=function(){function a(a){1==a&&navigator.app.loadUrl("www.facebook.com/Garmonbozia.Inc",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook GARMONBOZIA INC.",a,"Redirection",["OK","Annuler"])},a.XTREME=function(){function a(a){1==a&&navigator.app.loadUrl("www.xtremefest.fr",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site XTREME FEST.",a,"Redirection",["OK","Annuler"])},a.ANTHEMS=function(){function a(a){1==a&&navigator.app.loadUrl("www.facebook.com/anthems.ofsteel.9",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook ANTHEMS OF STEEL.",a,"Redirection",["OK","Annuler"])},a.BLACK=function(){function a(a){1==a&&navigator.app.loadUrl("www.facebook.com/BlackFlagProduction666",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook BLACK FLAG PROD.",a,"Redirection",["OK","Annuler"])},a.BLUE=function(){function a(a){1==a&&navigator.app.loadUrl("www.facebook.com/bluewaveconcert",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook BLUE WAVE PROD.",a,"Redirection",["OK","Annuler"])},a.RIFFEATER=function(){function a(a){1==a&&navigator.app.loadUrl("www.facebook.com/profile.php?id=100008459522952",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook RIFFEATER.",a,"Redirection",["OK","Annuler"])},a.SHAYTAN=function(){function a(a){1==a&&navigator.app.loadUrl("www.facebook.com/ShaytanDeathThrash",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook SHAYTAN.",a,"Redirection",["OK","Annuler"])}}]),SDM.angular.controller("TabController",["$scope","$http","InitService","DataService","$filter","sharedProperties","$timeout",function(a,b,c,d,e,f,g){"use strict";SDM.fw7.app.searchbar(".searchbar",{searchList:".list-block-search",searchIn:".item-title"});a.CountFav=f.getCountFav,a.CountNew=f.getCountNew,a.buttonNew=f.getbuttonNew,a.buttonFav=f.getbuttonFav,a.buttonSearch=f.getbuttonSearch,a.buttonDep=f.getbuttonDep,a.homevar=f.gethomevar,a.ShowFav=function(){var a=f.getfiltreFav;if("1"===a()||"undefined"===a()){f.setbuttonFav(0);var b=f.getCountFiltre;b()>50&&(SDM.fw7.app.showIndicator(),g(function(){SDM.fw7.app.hideIndicator()},350)),g(function(){f.setfiltreFav("0")},200),f.setTITRE("Concerts"),f.setdisplay_limit(50),d.ResetTitre(),d.Reset()}else f.setfiltreNew("0"),f.setbuttonNew(0),f.setfiltreFav("1"),f.setbuttonFav(1),f.setLocalisation(""),f.setdisplay_limit(1e3),f.setTITRE("Favoris"),f.setInfoDep("")},a.ClickDep=function(){1===a.buttonDep()?(SDM.fw7.app.mainView.router.back(),f.setbuttonDep(0),0===a.buttonFav()&&0===a.buttonNew()&&(f.setTITRE("Concerts"),f.setInfoDep(""),d.ResetTitre())):(f.setbuttonNew(0),f.setbuttonFav(0),f.setbuttonDep(1),g(function(){f.setfiltreNew("0"),f.setfiltreFav("0"),d.ResetTitre(),d.Reset()},300))},a.ShowSearch=function(){var a=f.getshowSearch,b=document.querySelector(".navbar-fixed .page>.searchbar~.page-content, .navbar-fixed>.searchbar~.page-content, .navbar-through .page>.searchbar~.page-content, .navbar-through>.searchbar~.page-content");if("1"===a()||"undefined"===a()){f.setshowSearch("0"),b.style.padding="60px 0",f.setbuttonSearch(0);var c=SDM.fw7.app.searchbar(".searchbar",{searchList:".list-block-search",searchIn:".item-title"});SDM.fw7.app.showIndicator();var d=c.input[0].value;""!=d?(c.clear(),g(function(){SDM.fw7.app.hideIndicator()},500)):SDM.fw7.app.hideIndicator()}else f.setbuttonSearch(1),b.style.padding="100px 0",f.setdisplay_limit(1e3),f.setshowSearch("1")},a.ShowNew=function(){var a=f.getfiltreNew;if("1"===a()||"undefined"===a()){f.setbuttonNew(0);var b=f.getCountFiltre;b()>50&&(SDM.fw7.app.showIndicator(),g(function(){SDM.fw7.app.hideIndicator()},350)),g(function(){f.setfiltreNew("0")},200),f.setTITRE("Concerts"),f.setdisplay_limit(50),d.ResetTitre(),d.Reset()}else f.setfiltreFav("0"),f.setbuttonFav(0),f.setbuttonNew(1),f.setLocalisation(""),f.setdisplay_limit(1e3),f.setfiltreNew("1"),f.setTITRE("Nouveaux concerts"),f.setInfoDep("");localStorage.setItem("RazAuto","1")}}]),SDM.angular.controller("GroupeAlphaController",["$scope","$window","$http","InitService","sharedProperties","DataService","$timeout",function(a,b,c,d,e,f,g){a.CountFav=e.getCountFav,a.CountNew=e.getCountNew,a.CountConcert=e.getCountConcert,a.CountFiltre=e.getCountFiltre,a.preload=e.getpreload,a.Info=e.getInfo,a.ArrayA=e.getArrayA,a.ArrayB=e.getArrayB,a.ArrayC=e.getArrayC,a.ArrayD=e.getArrayD,a.ArrayE=e.getArrayE,a.ArrayF=e.getArrayF,a.ArrayG=e.getArrayG,a.ArrayH=e.getArrayH,a.ArrayI=e.getArrayI,a.ArrayJ=e.getArrayJ,a.ArrayK=e.getArrayK,a.ArrayL=e.getArrayL,a.ArrayM=e.getArrayM,a.ArrayN=e.getArrayN,a.ArrayO=e.getArrayO,a.ArrayP=e.getArrayP,a.ArrayQ=e.getArrayQ,a.ArrayR=e.getArrayR,a.ArrayS=e.getArrayS,a.ArrayT=e.getArrayT,a.ArrayU=e.getArrayU,a.ArrayV=e.getArrayV,a.ArrayW=e.getArrayW,a.ArrayX=e.getArrayX,a.ArrayY=e.getArrayY,a.ArrayZ=e.getArrayZ,a.Array0=e.getArray0,a.ListeGroupe=function(a){e.setname(a),SDM.fw7.app.mainView.router.loadPage("#Liste-event-groupe")}}]),SDM.angular.controller("FAQController",["$scope","$http","InitService","DataService","sharedProperties","$filter",function(a,b,c,d,e,f){"use strict";a.ContactBeastFB=function(){function a(a){1==a&&navigator.app.loadUrl("https://www.facebook.com/BeastCreation",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook Beast Creation.",a,"Redirection",["OK","Annuler"])},a.ContactSDMFB=function(){function a(a){1==a&&navigator.app.loadUrl("https://www.facebook.com/SueurDeMetal/",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Facebook Sueur De Metal.",a,"Redirection",["OK","Annuler"])},a.ContactSDMInsta=function(){function a(a){1==a&&navigator.app.loadUrl("https://www.instagram.com/sueurdemetal",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur la page Instagram Sueur De Metal.",a,"Redirection",["OK","Annuler"])},a.SDMAnnonce=function(){function a(a){1==a&&navigator.app.loadUrl("http://www.sueurdemetal.com/ajouterconcert.php",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site Sueur de Metal.",a,"Redirection",["OK","Annuler"])},a.SDMHome=function(){function a(a){1==a&&navigator.app.loadUrl("http://www.sueurdemetal.com",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site Sueur de Metal.",a,"Redirection",["OK","Annuler"])},a.Amen=function(){function a(a){1==a&&navigator.app.loadUrl("http://www.amen.fr",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site Amen.",a,"Redirection",["OK","Annuler"])},a.SDMCGU=function(){function a(a){1==a&&navigator.app.loadUrl("http://www.sueurdemetal.com/cgu.php",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site Sueur de Metal.",a,"Redirection",["OK","Annuler"])},a.Framework7=function(){function a(a){1==a&&navigator.app.loadUrl("http://www.framework7.io/",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site Framework7.",a,"Redirection",["OK","Annuler"])},a.Phonegap=function(){function a(a){1==a&&navigator.app.loadUrl("http://phonegap.com/",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site Phonegap.",a,"Redirection",["OK","Annuler"])},a.AngularJS=function(){function a(a){1==a&&navigator.app.loadUrl("https://angularjs.org/",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le site AngularJS.",a,"Redirection",["OK","Annuler"])},a.ContactSDMMail=function(){function a(a){1==a&&navigator.app.loadUrl("contact@sueurdemetal.com",{openExternal:!0})}navigator.notification.confirm("Souhaitez-vous écrire un mail à Sueur de Metal?",a,"Redirection",["OK","Annuler"])},a.ContactAPPTwitter=function(){function a(a){1==a&&navigator.app.loadUrl("https://twitter.com/app_sdm",{openExternal:!0})}navigator.notification.confirm("Vous allez être redirigé sur le Twitter de l'Application.",a,"Redirection",["OK","Annuler"])}}]),SDM.angular.controller("DetailPageController",["$scope","$http","InitService","DataService",function(a,b,c,d){"use strict";d.addEventListener("movieClicked",function(b){a.concert=b,a.AddFav=function(a){d.AddFav(a)},a.DeleteFav=function(a){d.DeleteFav(a)},a.IsFav=function(a){return d.IsFav(a)},a.IsNew=function(a){var b=localStorage.getItem(a);if("new"===b||"10"===b)return 1}})}]),SDM.angular.controller("CalendarController",["$scope","$http","InitService","DataService","sharedProperties","$filter",function(a,b,c,d,e,f){"use strict";localStorage.getItem("departement"),localStorage.getItem("region");a.InfoDep=e.getInfoDep}]),SDM.angular.controller("DepartementController",["$scope","$http","InitService","DataService","sharedProperties","$timeout",function(a,b,c,d,e,f){"use strict";a.selectDep=localStorage.getItem("departement"),a.selectReg=localStorage.getItem("region");var g=localStorage.getItem("raz");if(null===g){a.ParamNew="1";localStorage.setItem("raz","1")}else a.ParamNew=g;a.ResetDep=function(){e.setbuttonDep(0)},a.Nouveautes=[{value:"1",nom:"Activé"},{value:"0",nom:"Désactivé"}],a.departements=[{value:"01",nom:"Ain"},{value:"02",nom:"Aisne"},{value:"03",nom:"Allier"},{value:"04",nom:"Alpes de Haute Provence"},{value:"05",nom:"Hautes Alpes"},{value:"06",nom:"Alpes Maritimes"},{value:"07",nom:"Ardèche"},{value:"08",nom:"Ardennes"},{value:"09",nom:"Ariège"},{value:"10",nom:"Aube"},{value:"11",nom:"Aude"},{value:"12",nom:"Aveyron"},{value:"13",nom:"Bouches du Rhône"},{value:"14",nom:"Calvados"},{value:"15",nom:"Cantal"},{value:"16",nom:"Charente"},{value:"17",nom:"Charente Maritime"},{value:"18",nom:"Cher"},{value:"19",nom:"Corrèze"},{value:"2A",nom:"Corse du Sud"},{value:"2B",nom:"Haute-Corse"},{value:"21",nom:"Côte d'Or"},{value:"22",nom:"Côtes d'Armor"},{value:"23",nom:"Creuse"},{value:"24",nom:"Dordogne"},{value:"25",nom:"Doubs"},{value:"26",nom:"Drôme"},{value:"27",nom:"Eure"},{value:"28",nom:"Eure et Loir"},{value:"29",nom:"Finistère"},{value:"30",nom:"Gard"},{value:"31",nom:"Haute Garonne"},{value:"32",nom:"Gers"},{value:"33",nom:"Gironde"},{value:"34",nom:"Hérault"},{value:"35",nom:"Ille et Vilaine"},{value:"36",nom:"Indre"},{value:"37",nom:"Indre et Loire"},{value:"38",nom:"Isère"},{value:"39",nom:"Jura"},{value:"40",nom:"Landes"},{value:"41",nom:"Loir et Cher"},{value:"42",nom:"Loire"},{value:"43",nom:"Haute Loire"},{value:"44",nom:"Loire Atlantique"},{value:"45",nom:"Loiret"},{value:"46",nom:"Lot"},{value:"47",nom:"Lot et Garonne"},{value:"48",nom:"Lozère"},{value:"49",nom:"Maine et Loire"},{value:"50",nom:"Manche"},{value:"51",nom:"Marne"},{value:"52",nom:"Haute Marne"},{value:"53",nom:"Mayenne"},{value:"54",nom:"Meurthe et Moselle"},{value:"55",nom:"Meuse"},{value:"56",nom:"Morbihan"},{value:"57",nom:"Moselle"},{value:"58",nom:"Nièvre"},{value:"59",nom:"Nord"},{value:"60",nom:"Oise"},{value:"61",nom:"Orne"},{value:"62",nom:"Pas de Calais"},{value:"63",nom:"Puy de Dôme"},{value:"64",nom:"Pyrénées Atlantiques"},{value:"65",nom:"Hautes Pyrénées"},{value:"66",nom:"Pyrénées Orientales"},{value:"67",nom:"Bas Rhin"},{value:"68",nom:"Haut Rhin"},{value:"69",nom:"Rhône"},{value:"70",nom:"Haute Saône"},{value:"71",nom:"Saône et Loire"},{value:"72",nom:"Sarthe"},{value:"73",nom:"Savoie"},{value:"74",nom:"Haute Savoie"},{value:"75",nom:"Paris"},{value:"76",nom:"Seine Maritime"},{value:"77",nom:"Seine et Marne"},{value:"78",nom:"Yvelines"},{value:"79",nom:"Deux Sèvres"},{value:"80",nom:"Somme"},{value:"81",nom:"Tarn"},{value:"82",nom:"Tarn et Garonne"},{value:"83",nom:"Var"},{value:"84",nom:"Vaucluse"},{value:"85",nom:"Vendée"},{value:"86",nom:"Vienne"},{value:"87",nom:"Haute Vienne"},{value:"88",nom:"Vosges"},{value:"89",nom:"Yonne"},{value:"90",nom:"Territoire de Belfort"},{value:"91",nom:"Essonne"},{value:"92",nom:"Hauts de Seine"},{value:"93",nom:"Seine Saint Denis"},{value:"94",nom:"Val de Marne"},{value:"95",nom:"Val d'Oise"}],a.regions=[{value:"44",nom:"Alsace-Lorraine-Champagne-Ardenne"},{value:"75",nom:"Aquitaine-Poitou-Charentes-Limousin"},{value:"22",nom:"Bourgogne-France Comté"},{value:"53",nom:"Bretagne"},{value:"24",nom:"Centre"},{value:"94",nom:"Corse"},{value:"11",nom:"Île-de-France"},{value:"76",nom:"Midi-Pyrénées-Languedoc-Roussillon"},{value:"32",nom:"Nord-Pas-de-Calais-Picardie"},{value:"28",nom:"Normandie"},{value:"52",nom:"Pays-de-la-Loire"},{value:"93",nom:"Provence-Alpes-Côte-d'Azur"},{value:"84",nom:"Rhône-Alpes-Auvergne"}],$$("select#theselect").on("change",function(){SDM.fw7.app.showIndicator(),localStorage.removeItem("region"),e.setLocalisation(""),a.selectReg="",$$('.smart-select.region select option[value=""]').prop("selected",!0),$$(".smart-select.region .item-after").text("Aucun");var b=this.value;""==b?(e.setfiltreRegion("0"),e.setInfo("")):(e.setfiltreRegion("1"),e.setInfo("département")),localStorage.setItem("departement",b),e.setLocalisation(b),i();var c=angular.element(document.querySelector("#calendar-inline-container"));if(c.empty(),d.ResetTitre(),d.InitCalendar(),d.Reset(),a.$apply(),""==b)e.setCountFiltre(null);else{var g=angular.element(document.getElementById("IndexPage")).scope().filteritem,h=Object.keys(g);"undefined"===h.lenght&&(h.length=0),e.setCountFiltre(h.length)}f(function(){SDM.fw7.app.hideIndicator(),SDM.fw7.app.mainView.router.loadPage("#index")},500)}),$$("select#selectRegion").on("change",function(){SDM.fw7.app.showIndicator(),localStorage.removeItem("departement"),e.setLocalisation(""),a.selectDep="",$$('.smart-select.departement select option[value=""]').prop("selected",!0),$$(".smart-select.departement .item-after").text("Aucun"),e.setInfoDep("");var b=this.value;""==b?(e.setfiltreRegion("0"),e.setInfo("")):(e.setfiltreRegion("1"),e.setInfo("région")),localStorage.setItem("region",b),e.setLocalisation(b),i();var c=angular.element(document.querySelector("#calendar-inline-container"));if(c.empty(),d.InitCalendar(),d.ResetTitre(),d.Reset(),a.$apply(),""==b)e.setCountFiltre(null);else{var g=angular.element(document.getElementById("IndexPage")).scope().filteritem,h=Object.keys(g);"undefined"===h.lenght&&(h.length=0),e.setCountFiltre(h.length)}f(function(){SDM.fw7.app.hideIndicator(),SDM.fw7.app.mainView.router.loadPage("#index")},500)});var i=function(){e.setTITRE("Concerts"),e.setbuttonFav(0),e.sethomevar(1),e.setbuttonNew(0),e.setbuttonSearch(0),e.setbuttonDep(0),e.setshowSearch("0");var a=SDM.fw7.app.searchbar(".searchbar",{searchList:".list-block-search",searchIn:".item-title"});a.clear()};$$("select#ParamNouveaute").on("change",function(){var a=this.value;localStorage.setItem("raz",a);if("0"==a){localStorage.setItem("RazAuto",a)}})}]),SDM.angular.controller("IndexPageController",["$scope","$http","$filter","InitService","DataService","sharedProperties","$timeout",function(a,b,c,d,e,f,g){"use strict";a.onItemClicked=function(a){e.movieClicked(a)},a.filtreFav=f.getfiltreFav,a.TITRE=f.getTITRE,a.Localisation=f.getLocalisation,a.display_limit=f.getdisplay_limit,a.filtreNew=f.getfiltreNew,a.InfoDep=f.getInfoDep,a.showSearch=f.getshowSearch,a.buttonNew=f.getbuttonNew,a.filtreRegion=f.getfiltreRegion,a.Info=f.getInfo;var h="",i="",j=!1,k=localStorage.getItem("departement"),l=localStorage.getItem("region");a.DateNow=Math.round((new Date).getTime()/1e3),a.SearchNull=0,a.DepNull=0,a.GotoDep=function(){SDM.fw7.app.mainView.router.loadPage("#Departement")},""!=k&&null!=k?(f.setLocalisation(k),f.setInfo("département"),f.setfiltreRegion("1"),f.setdisplay_limit(1500)):""!=l&&null!=l?(f.setLocalisation(l),f.setInfo("région"),f.setfiltreRegion("1"),f.setdisplay_limit(1500)):(f.setdisplay_limit(25),f.setfiltreRegion("0")),SDM.fw7.app.onPageAfterAnimation("index",function(b){0===Object.keys(a.filteritem).length?a.DepNull=1:(a.DepNull=0,a.SearchNull=0),a.$apply()}),d.addEventListener("ready",function(){e.ResetTitre(),b({method:"GET",url:"http://sueurdemetal.com/json/event.txt",timeout:7e3}).then(function(b){h=b.data.results.collection1,i=b.data.version,p()},function(b){h="offline",p()}),a.AddFav=function(a){e.AddFav(a)},a.DeleteFav=function(a){e.DeleteFav(a)},a.IsFav=function(a){return e.IsFav(a)},a.IsNew=function(a){return e.IsNew(a)},a.NewInLocal=function(){for(var a=0,b=localStorage.length;a<=b;++a){var c=localStorage.getItem(localStorage.key(a));localStorage.key(a);if("new"===c)return!0}},a.FavInLocal=function(){for(var a=0,b=localStorage.length;a<=b;++a){var c=localStorage.getItem(localStorage.key(a)),d=localStorage.key(a);if("json"!=d&&"date"!=d&&"raz"!=d&&"region"!=d&&"departement"!=d&&"version"!=d&&"RazAuto"!=d&&("1"===c||"10"===c))return!0}},a.DeleteNew=function(){e.EraseNew(),f.setTITRE("Concerts"),f.setCountNew("0"),e.Reset()},a.Reset=function(){SDM.fw7.app.mainView.router.loadPage("#Home"),g(function(){e.Reset(),e.ResetTab()},250),""!=a.search&&null!=a.search&&g(function(){var a=SDM.fw7.app.searchbar(".searchbar",{searchList:".list-block-search",searchIn:".item-title"});a.clear()},500),""!=a.filtreFav()&&null!=a.filtreFav()&&g(function(){f.setfiltreFav("")},500),""!=a.filtreNew()&&null!=a.filtreNew()&&g(function(){f.setfiltreNew("")},500),f.setdisplay_limit(50)}});var m=0,n=0,p=function(){if("offline"===h){if(j===!1){j=!0;var b=localStorage.getItem("json"),b=JSON.parse(b);if(null!=b){SDM.fw7.app.hideIndicator(),f.setpreload(1);var d=localStorage.getItem("version"),k=r(d);alert("Connexion impossible, données du "+k+" chargées."),e.InitNew(),a.concerts=b;var l=Math.round((new Date).getTime()/1e3),o=e.NbTotal(b,l);f.setCountConcert(o);var p=e.NbFiltre(b);f.setCountFiltre(p),f.setConcerts(b),e.ListeGroupe(),e.InitCalendar();for(var s=0,t=localStorage.length;s<t;++s){var u=localStorage.getItem(localStorage.key(s)),v=localStorage.key(s);"json"!=v&&"date"!=v&&"raz"!=v&&"region"!=v&&"departement"!=v&&"version"!=v&&"RazAuto"!=v&&("1"!==u&&"10"!==u||(m+=1),"new"!==u&&"10"!==u||(n+=1))}f.setCountFav(m),f.setCountNew(n)}else g(function(){navigator.app.clearHistory(),navigator.app.exitApp()},3e3)}}else if(""!=h&&"offline"!=h){e.InitNew();for(var s=0,t=localStorage.length;s<=t;++s){var u=localStorage.getItem(localStorage.key(s)),v=localStorage.key(s);if("json"!=v&&"date"!=v&&"raz"!=v&&"region"!=v&&"departement"!=v&&"version"!=v&&"RazAuto"!=v){if("1"===u||"10"===u){var w=c("filter")(h,{id:v},!0);w.length?m+=1:localStorage.removeItem(v)}if("new"===u||"10"===u){var w=c("filter")(h,{id:v},!0);w.length?n+=1:localStorage.removeItem(v)}}}f.setCountFav(m),f.setCountNew(n),a.concerts=h;var l=Math.round((new Date).getTime()/1e3),o=e.NbTotal(h,l);f.setCountConcert(o);var p=e.NbFiltre(h);f.setCountFiltre(p),f.setConcerts(h);var d=localStorage.getItem("version");if(i!=d)if(localStorage.setItem("version",i),null!=b)q(h);else{localStorage.setItem("json",JSON.stringify(h))}SDM.fw7.app.hideIndicator(),f.setpreload(1),e.ListeGroupe(),e.InitCalendar()}a.$watch("search",function(b){0===Object.keys(a.filteritem).length?a.SearchNull=1:a.SearchNull=0})},q=function(a){var b=localStorage.getItem("departement"),c=localStorage.getItem("region");angular.forEach(a,function(a,d){var e=!0;if(angular.forEach(json,function(b,c){e&&a.id===b.id&&(e=!1)}),e===!0)if(""!=b&&null!=b){if(a.departement===b){var h=(localStorage.setItem(a.id,"new"),f.getCountNew),i=h()+1;f.setCountNew(i)}}else if(""!=c&&null!=c&&a.region===c){var h=(localStorage.setItem(a.id,"new"),f.getCountNew),i=h()+1;f.setCountNew(i)}});localStorage.setItem("json",JSON.stringify(a))},r=function(a){a=new Date(1e3*a);var b=a.getMonth()+1;return a.getDate()+"/"+b+"/"+a.getFullYear()}}]),SDM.angular.controller("HomeController",["$scope","$window","$http","InitService","sharedProperties","DataService","$timeout",function(a,b,c,d,e,f,g){a.CountFav=e.getCountFav,a.CountNew=e.getCountNew,a.CountConcert=e.getCountConcert,a.CountFiltre=e.getCountFiltre,a.preload=e.getpreload,a.Info=e.getInfo,a.Home=function(){e.setbuttonNew(0),e.setfiltreNew("0"),e.setfiltreFav("0");var a=e.getCountFiltre;a()>50?(SDM.fw7.app.showIndicator(),g(function(){SDM.fw7.app.hideIndicator()},350),g(function(){SDM.fw7.app.mainView.router.loadPage("#index"),e.setTITRE("Concerts"),e.sethomevar(1)},350)):(SDM.fw7.app.mainView.router.loadPage("#index"),e.setTITRE("Concerts"),e.sethomevar(1)),f.ResetTitre()},a.HomeUne=function(){e.sethomevar(0),SDM.fw7.app.mainView.router.loadPage("#Une")},a.HomePartenaires=function(){e.sethomevar(0),SDM.fw7.app.mainView.router.loadPage("#Partenaires")},a.BackHome=function(){SDM.fw7.app.mainView.router.loadPage("#Home")},a.HomeFav=function(){e.setfiltreFav("1"),e.setLocalisation(""),e.setbuttonFav(1),e.sethomevar(1),e.setTITRE("Favoris"),e.setInfoDep(""),e.setdisplay_limit(1e3),SDM.fw7.app.mainView.router.loadPage("#index")},a.HomeNew=function(){e.setLocalisation(""),e.setbuttonNew(1),e.setfiltreNew("1"),e.sethomevar(1),e.setTITRE("Nouveaux concerts"),e.setInfoDep(""),e.setdisplay_limit(1e3);localStorage.setItem("RazAuto","1");SDM.fw7.app.mainView.router.loadPage("#index")},a.HomeSearch=function(){var a=document.querySelector(".navbar-fixed .page>.searchbar~.page-content, .navbar-fixed>.searchbar~.page-content, .navbar-through .page>.searchbar~.page-content, .navbar-through>.searchbar~.page-content");a.style.padding="100px 0",e.sethomevar(1),e.setbuttonSearch(1),e.setTITRE("Concerts"),e.setshowSearch("1"),e.setdisplay_limit(1e3),f.ResetTitre(),SDM.fw7.app.mainView.router.loadPage("#index")},a.HomeCalendar=function(){e.sethomevar(0),SDM.fw7.app.mainView.router.loadPage("#calendar")},a.HomeFAQ=function(){e.sethomevar(0),SDM.fw7.app.mainView.router.loadPage("#FAQ")},a.HomeListeGroupes=function(){e.sethomevar(0),SDM.fw7.app.showIndicator(),g(function(){SDM.fw7.app.hideIndicator()},200),g(function(){SDM.fw7.app.mainView.router.loadPage("#ListeGroupes")},200)},a.Dep=function(){e.sethomevar(0),SDM.fw7.app.mainView.router.loadPage("#Departement")}}]);